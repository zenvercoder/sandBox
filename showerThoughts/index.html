<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="mdl/material.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Shower Thoughts</title>
</head>
<body>

<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">

        <div class="demo-card-square mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title mdl-card--expand">
            </div>
            <p id="showerThought" class="mdl-card__supporting-text"></p>
            <div class="mdl-card__actions mdl-card--border center">
                <button  id="ajaxButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                    Get Latest Shower Thoughts
                </button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    (function() {
        var httpRequest;

        document.getElementById("ajaxButton").onclick = function() {

            makeRequest('https://www.reddit.com/r/intrusivethoughts/hot.json');

        };

        function makeRequest(url) {
            httpRequest = new XMLHttpRequest();

            if (!httpRequest) {
                alert('Giving up :( Cannot create an XMLHTTP instance');
                return false;
            }
            httpRequest.onreadystatechange = alertContents;
            httpRequest.open('GET', url);
            httpRequest.send();
        }

        function alertContents() {
            try {
                if (httpRequest.readyState === XMLHttpRequest.DONE) {
                    if (httpRequest.status === 200) {
                        var responseBody = httpRequest.response;
                        var obj = JSON.parse(responseBody);

                        function getRandomInt(min, max) {
                            min = Math.ceil(min);
                            max = Math.floor(max);
                            return Math.floor(Math.random() * (max - min)) + min;
                        };

                        var random = getRandomInt(3, 20);
                        console.log(random);

                        document.getElementById('showerThought').innerHTML = obj.data.children[random].data.title;
                    } else {
                        alert('There was a problem with the request.');
                    }
                }
            }
            catch( e ) {
                alert('Caught Exception: ' + e.description);
            }
        }

    })();
</script>

<script src="mdl/material.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</body>
</html>